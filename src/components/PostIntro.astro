---
import { site } from "../data/site";
import { dateFilter, w3DateFilter } from "../utils/filters";

export interface Props {
  title: string;
  cover_image?: string | null;
  date?: Date;
  reading_time_minutes?: number;
  fileSlug: string;
  url: string;
  canonical_url?: string;
}

const { title, cover_image, date, reading_time_minutes, fileSlug, url } =
  Astro.props;

// Generate boost links
const intentToTweet = `https://twitter.com/intent/tweet?text=${encodeURIComponent(
  `${title} by ${site.twitterHandle} ${site.url}${url}`
)}`;

const intentToLinkedIn = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(
  site.url + url
)}`;

const intentToToot = `https://toot.kytta.dev/?text=${encodeURIComponent(
  `${title} by ${site.mastodonHandle} ${site.url}${url}`
)}`;

const intentToBluesky = `https://bsky.app/intent/compose?text=${encodeURIComponent(
  `${title} ${site.url}${url}`
)}`;

const foremBoostLink = `https://dev.to/nickytonline/${fileSlug}`;
---

<header class="mb-12">
  {
    cover_image && (
      <img
        src={cover_image}
        alt=""
        class="w-full rounded-xl mb-8"
        data-not-lazy
      />
    )
  }

  <div class="mb-6">
    <h1 class="mb-4" data-pagefind-meta="title">
      {title}
    </h1>

    <div class="flex items-center gap-4 text-muted-foreground mb-6">
      {
        date && (
          <time
            datetime={w3DateFilter(date)}
            class="italic text-lg dt-published"
          >
            {dateFilter(date)}
          </time>
        )
      }
      {
        reading_time_minutes && (
          <>
            <span class="text-pink-600 dark:text-pink-400 font-semibold">
              â€¢
            </span>
            <span class="text-lg font-semibold text-pink-600 dark:text-pink-400">
              {reading_time_minutes} min read
            </span>
          </>
        )
      }
    </div>
  </div>

  <div class="flex flex-wrap gap-3">
    <a
      href={foremBoostLink}
      class="inline-flex items-center gap-2 px-4 py-2 bg-secondary hover:bg-pink-600 focus:bg-pink-600 text-secondary-foreground hover:text-white focus:text-white dark:hover:bg-pink-500 dark:focus:bg-pink-500 rounded-lg font-semibold focus:outline-none transition-colors"
    >
      Boost on DEV
    </a>
    <a
      href={intentToBluesky}
      class="inline-flex items-center gap-2 px-4 py-2 bg-secondary hover:bg-pink-600 focus:bg-pink-600 text-secondary-foreground hover:text-white focus:text-white dark:hover:bg-pink-500 dark:focus:bg-pink-500 rounded-lg font-semibold focus:outline-none transition-colors"
    >
      Share on Bluesky
    </a>
    <a
      href={intentToToot}
      class="inline-flex items-center gap-2 px-4 py-2 bg-secondary hover:bg-pink-600 focus:bg-pink-600 text-secondary-foreground hover:text-white focus:text-white dark:hover:bg-pink-500 dark:focus:bg-pink-500 rounded-lg font-semibold focus:outline-none transition-colors"
    >
      Toot it!
    </a>
    <a
      href={intentToTweet}
      class="inline-flex items-center gap-2 px-4 py-2 bg-secondary hover:bg-pink-600 focus:bg-pink-600 text-secondary-foreground hover:text-white focus:text-white dark:hover:bg-pink-500 dark:focus:bg-pink-500 rounded-lg font-semibold focus:outline-none transition-colors"
    >
      Tweet It!
    </a>
    <a
      href={intentToLinkedIn}
      class="inline-flex items-center gap-2 px-4 py-2 bg-secondary hover:bg-pink-600 focus:bg-pink-600 text-secondary-foreground hover:text-white focus:text-white dark:hover:bg-pink-500 dark:focus:bg-pink-500 rounded-lg font-semibold focus:outline-none transition-colors"
    >
      Share on LinkedIn
    </a>
  </div>
</header>
