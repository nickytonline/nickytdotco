---
interface Props {
  url: string;
}

const { url } = Astro.props;

let updatedUrl = new URL(url);

if (updatedUrl.pathname.startsWith("/nickytonline")) {
  updatedUrl = new URL(
    updatedUrl.pathname.replace("/nickytonline", "/blog"),
    Astro.url
  );
}

const encodedUrl = encodeURIComponent(updatedUrl.toString()).replace(/\/$/, "");
---

<a href={updatedUrl}>
  <span class="sr-only">{updatedUrl}</span>
  <picture>
    <source
      type="image/webp"
      srcset={`https://v1.opengraph.11ty.dev/${encodedUrl}/small/webp/ 375w, https://v1.opengraph.11ty.dev/${encodedUrl}/medium/webp/ 650w`}
      sizes="100vw"
    />
    <source
      type="image/jpeg"
      srcset={`https://v1.opengraph.11ty.dev/${encodedUrl}/small/jpeg/ 375w, https://v1.opengraph.11ty.dev/${encodedUrl}/medium/jpeg/ 650w`}
      sizes="100vw"
    />
    <img
      alt={""}
      loading="lazy"
      decoding="async"
      src={`https://v1.opengraph.11ty.dev/${encodedUrl}/small/jpeg/`}
      width="650"
      height="341"
    />
  </picture>
</a>
