---
import EventCalendar from "./EventCalendar";

interface Platform {
  name: string;
  url: string;
}

interface Props {
  title: string;
  guest: string;
  datetime: string;
  image?: string;
  platforms: Platform[];
  eventDate: string;
  eventName: string;
  description: string;
  location: string;
}

const {
  title,
  guest,
  datetime,
  image,
  platforms,
  eventDate,
  eventName,
  description,
  location,
} = Astro.props;
---

<div class="stream-card flex flex-col md:flex-row gap-6">
  {
    image && (
      <div class="relative flex-shrink-0 w-full md:w-40 h-50 md:h-40 rounded-xl overflow-hidden">
        <img
          src={image}
          alt=""
          class="w-full h-full object-cover object-right"
        />
      </div>
    )
  }
  <div class="flex-1 flex flex-col gap-3">
    <h3 class="text-2xl font-bold leading-tight text-foreground">{title}</h3>
    <p class="text-lg text-muted-foreground">{guest}</p>
    <time class="italic text-base text-muted-foreground font-medium"
      >{datetime}</time
    >

    <div
      class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mt-auto flex-wrap"
    >
      <div class="flex items-center gap-3 flex-wrap">
        <span class="text-base text-foreground">Watch live on:</span>
        {
          platforms.map((platform) => (
            <a
              href={platform.url}
              class="text-base text-foreground underline font-medium hover:text-pink-600 focus:text-pink-600 dark:hover:text-pink-400 dark:focus:text-pink-400 outline-none"
              target="_blank"
              rel="noopener noreferrer"
            >
              {platform.name}
            </a>
          ))
        }
      </div>
      <EventCalendar
        eventDate={eventDate}
        eventName={eventName}
        description={description}
        duration={90}
        location={location}
        client:visible
      />
    </div>
  </div>
</div>
